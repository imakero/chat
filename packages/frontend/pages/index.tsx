import {
  Box,
  Button,
  Container,
  Heading,
  HStack,
  VStack,
} from "@chakra-ui/react";
import { Form, Formik, FormikHelpers } from "formik";
import Head from "next/head";
import AutosizeTextarea from "../components/form/autosize-textarea";

type Values = {
  message: string;
};

export default function Home() {
  return (
    <Container maxW="lg" h="100vh" overflow="scroll">
      <Head>
        <title>Chat</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <VStack alignItems="start" h="100vh">
        <Heading as="h1">Chat</Heading>
        <VStack flexGrow={1}></VStack>
        <Box w="100%" pb={4}>
          <Formik
            initialValues={{ message: "" }}
            onSubmit={(
              values: Values,
              { setSubmitting, resetForm }: FormikHelpers<Values>
            ) => {
              setSubmitting(false);
              resetForm();
            }}
          >
            {({ submitForm }) => (
              <HStack as={Form} w="100%">
                <AutosizeTextarea
                  name="message"
                  maxH="150px"
                  overflow="sroll"
                  onKeyDown={(event) => {
                    if (event.key === "Enter") {
                      event.preventDefault();
                      submitForm();
                    }
                  }}
                />
                <Button type="submit">Send</Button>
              </HStack>
            )}
          </Formik>
        </Box>
      </VStack>
    </Container>
  );
}
